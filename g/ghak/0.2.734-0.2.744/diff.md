# Comparing `tmp/ghak-0.2.734-py3.11.egg` & `tmp/ghak-0.2.744-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,21 +1,14 @@
-Zip file size: 15071 bytes, number of entries: 19
--rw-r--r--  2.0 unx      405 b- defN 23-Jul-10 16:46 EGG-INFO/PKG-INFO
--rw-r--r--  2.0 unx      411 b- defN 23-Jul-10 16:46 EGG-INFO/SOURCES.txt
--rw-r--r--  2.0 unx        1 b- defN 23-Jul-10 16:46 EGG-INFO/dependency_links.txt
--rw-r--r--  2.0 unx       39 b- defN 23-Jul-10 16:46 EGG-INFO/entry_points.txt
--rw-r--r--  2.0 unx       69 b- defN 23-Jul-10 16:46 EGG-INFO/requires.txt
--rw-r--r--  2.0 unx        5 b- defN 23-Jul-10 16:46 EGG-INFO/top_level.txt
--rw-r--r--  2.0 unx        1 b- defN 23-Jul-10 16:46 EGG-INFO/zip-safe
--rw-r--r--  2.0 unx       90 b- defN 23-Jul-10 16:41 ghak/__init__.py
--rw-r--r--  2.0 unx     3745 b- defN 23-Jul-10 16:46 ghak/ghak.py
--rw-r--r--  2.0 unx      312 b- defN 23-Jul-10 16:46 ghak/__pycache__/__init__.cpython-311.pyc
--rw-r--r--  2.0 unx     4462 b- defN 23-Jul-10 16:46 ghak/__pycache__/ghak.cpython-311.pyc
--rw-r--r--  2.0 unx     3525 b- defN 23-Jul-10 15:45 ghak/factories/TokenFactory.py
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-30 18:51 ghak/factories/__init__.py
--rw-r--r--  2.0 unx     5498 b- defN 23-Jul-10 16:46 ghak/factories/__pycache__/TokenFactory.cpython-311.pyc
--rw-r--r--  2.0 unx      204 b- defN 23-Jul-10 16:46 ghak/factories/__pycache__/__init__.cpython-311.pyc
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-30 14:14 ghak/secretstores/__init__.py
--rw-r--r--  2.0 unx     3841 b- defN 23-Jul-10 15:53 ghak/secretstores/secretstores.py
--rw-r--r--  2.0 unx      207 b- defN 23-Jul-10 16:46 ghak/secretstores/__pycache__/__init__.cpython-311.pyc
--rw-r--r--  2.0 unx     5756 b- defN 23-Jul-10 16:46 ghak/secretstores/__pycache__/secretstores.cpython-311.pyc
-19 files, 28627 bytes uncompressed, 12419 bytes compressed:  56.6%
+Zip file size: 18836 bytes, number of entries: 12
+-rw-r--r--  2.0 unx      145 b- defN 23-Jul-10 23:00 ghak/__init__.py
+-rw-r--r--  2.0 unx     4851 b- defN 23-Jul-10 22:59 ghak/ghak.py
+-rw-r--r--  2.0 unx     3525 b- defN 23-Jul-10 20:45 ghak/factories/TokenFactory.py
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-30 23:51 ghak/factories/__init__.py
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-30 19:14 ghak/secretstores/__init__.py
+-rw-r--r--  2.0 unx     3841 b- defN 23-Jul-10 20:53 ghak/secretstores/secretstores.py
+-rw-r--r--  2.0 unx    35149 b- defN 23-Jul-10 23:25 ghak-0.2.744.dist-info/LICENSE
+-rw-r--r--  2.0 unx      565 b- defN 23-Jul-10 23:25 ghak-0.2.744.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-10 23:25 ghak-0.2.744.dist-info/WHEEL
+-rw-r--r--  2.0 unx       39 b- defN 23-Jul-10 23:25 ghak-0.2.744.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        5 b- defN 23-Jul-10 23:25 ghak-0.2.744.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx      957 b- defN 23-Jul-10 23:25 ghak-0.2.744.dist-info/RECORD
+12 files, 49225 bytes uncompressed, 17224 bytes compressed:  65.0%
```

## zipnote «TEMP»/diffoscope_0mh_luqj_/tmpko8p3xzq_.zip

```diff
@@ -1,58 +1,37 @@
-Filename: EGG-INFO/PKG-INFO
-Comment: 
-
-Filename: EGG-INFO/SOURCES.txt
-Comment: 
-
-Filename: EGG-INFO/dependency_links.txt
-Comment: 
-
-Filename: EGG-INFO/entry_points.txt
-Comment: 
-
-Filename: EGG-INFO/requires.txt
-Comment: 
-
-Filename: EGG-INFO/top_level.txt
-Comment: 
-
-Filename: EGG-INFO/zip-safe
-Comment: 
-
 Filename: ghak/__init__.py
 Comment: 
 
 Filename: ghak/ghak.py
 Comment: 
 
-Filename: ghak/__pycache__/__init__.cpython-311.pyc
+Filename: ghak/factories/TokenFactory.py
 Comment: 
 
-Filename: ghak/__pycache__/ghak.cpython-311.pyc
+Filename: ghak/factories/__init__.py
 Comment: 
 
-Filename: ghak/factories/TokenFactory.py
+Filename: ghak/secretstores/__init__.py
 Comment: 
 
-Filename: ghak/factories/__init__.py
+Filename: ghak/secretstores/secretstores.py
 Comment: 
 
-Filename: ghak/factories/__pycache__/TokenFactory.cpython-311.pyc
+Filename: ghak-0.2.744.dist-info/LICENSE
 Comment: 
 
-Filename: ghak/factories/__pycache__/__init__.cpython-311.pyc
+Filename: ghak-0.2.744.dist-info/METADATA
 Comment: 
 
-Filename: ghak/secretstores/__init__.py
+Filename: ghak-0.2.744.dist-info/WHEEL
 Comment: 
 
-Filename: ghak/secretstores/secretstores.py
+Filename: ghak-0.2.744.dist-info/entry_points.txt
 Comment: 
 
-Filename: ghak/secretstores/__pycache__/__init__.cpython-311.pyc
+Filename: ghak-0.2.744.dist-info/top_level.txt
 Comment: 
 
-Filename: ghak/secretstores/__pycache__/secretstores.cpython-311.pyc
+Filename: ghak-0.2.744.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## ghak/__init__.py

```diff
@@ -1,2 +1,3 @@
 from .factories import TokenFactory
 from .secretstores import SecretStore, SecretStoreGCP
+from .ghak import cli, JsonFormatter, configureLogging
```

## ghak/ghak.py

```diff
@@ -1,41 +1,86 @@
 #!/usr/bin/env python3
 
 import click
 from .secretstores import SecretStore, SecretStoreGCP
 from .factories import TokenFactory
 import sys
 import logging
+import json
 
 logger = logging.getLogger(__name__)
 
 
+class JsonFormatter(logging.Formatter):
+    def format(self, record):
+        # convert the log record to a dictionary
+        log_dict = {
+            "timestamp": record.created,
+            "name": record.name,
+            "level": record.levelname,
+            "message": record.getMessage(),
+        }
+
+        # convert the dictionary to JSON format
+        log_json = json.dumps(log_dict)
+
+        # return the JSON-formatted log message
+        return log_json
+
+
+def configureLogging(log_level, log_destination, log_format):
+    if log_destination == "stdout":
+        handler = logging.StreamHandler(sys.stdout)
+    else:
+        handler = logging.FileHandler(log_destination)
+
+    if log_format == "json":
+        handler.setFormatter(JsonFormatter())
+
+    if log_level == "DEBUG":
+        level = logging.DEBUG
+    elif log_level == "ERROR":
+        level = logging.ERROR
+    elif log_level == "INFO":
+        level = logging.INFO
+    elif log_level == "WARN":
+        level = logging.INFO
+
+    logging.basicConfig(
+        format="%(asctime)s,%(msecs)d %(name)s %(levelname)s %(message)s",
+        level=level,
+        handlers=[handler],
+    )
+
+
 # This project uses click to parse CLI arguments and
 # build the command layout.
 #
 # The method below is the main entrypoint for the cli tool
 @click.group()
 @click.pass_context
-@click.option("--debug/--no-debug", default=False, is_flag=True)
-def cli(ctx, debug):
+@click.option(
+    "--log-level",
+    default="ERROR",
+    type=click.Choice(["INFO", "DEBUG", "WARN", "ERROR"]),
+)
+@click.option(
+    "--log-destination",
+    default="stdout",
+    required=True,
+)
+@click.option(
+    "--log-format",
+    default="tab",
+    type=click.Choice(["tab", "json"]),
+)
+def cli(ctx, log_level, log_destination, log_format):
     ctx.max_content_width = 200
     ctx.auto_envvar_prefix = "GHAK_"
-    if debug:
-        logging.basicConfig(
-            stream=sys.stdout,
-            format="%(asctime)s,%(msecs)d %(name)s %(levelname)s %(message)s",
-            level=logging.DEBUG,
-        )
-
-    else:
-        logging.basicConfig(
-            stream=sys.stdout,
-            format="%(asctime)s,%(msecs)d %(name)s %(levelname)s %(message)s",
-            level=logging.ERROR,
-        )
+    configureLogging(log_level, log_destination, log_format)
 
 
 # The generate command is used to generate a GitHub
 # or GitHub Actions runner token.
 #
 # You need access to a PEM file generated when the app
 # was created in GitHub.
```

