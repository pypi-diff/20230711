# Comparing `tmp/odoo14_addon_product_contract-14.0.1.0.2.dev4-py3-none-any.whl.zip` & `tmp/odoo14_addon_product_contract-14.0.1.1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,45 +1,45 @@
-Zip file size: 71586 bytes, number of entries: 43
--rw-r--r--  2.0 unx     3480 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/README.rst
--rw-r--r--  2.0 unx      121 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/__init__.py
--rw-r--r--  2.0 unx      750 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/__manifest__.py
--rw-r--r--  2.0 unx    13107 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/de.po
--rw-r--r--  2.0 unx    13429 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/es.po
--rw-r--r--  2.0 unx    12193 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/fi.po
--rw-r--r--  2.0 unx    13411 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/fr.po
--rw-r--r--  2.0 unx    12672 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/hi_IN.po
--rw-r--r--  2.0 unx    13060 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/hr.po
--rw-r--r--  2.0 unx    12455 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/hr_HR.po
--rw-r--r--  2.0 unx    13420 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/it.po
--rw-r--r--  2.0 unx    12349 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/nl.po
--rw-r--r--  2.0 unx    12339 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/nl_NL.po
--rw-r--r--  2.0 unx    15468 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/product_contract.pot
--rw-r--r--  2.0 unx    13386 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/pt.po
--rw-r--r--  2.0 unx    13427 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/pt_BR.po
--rw-r--r--  2.0 unx    12378 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/ru.po
--rw-r--r--  2.0 unx    12359 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/tr.po
--rw-r--r--  2.0 unx    12126 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/i18n/tr_TR.po
--rw-r--r--  2.0 unx      327 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/models/__init__.py
--rw-r--r--  2.0 unx     1289 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/models/contract.py
--rw-r--r--  2.0 unx     2022 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/models/contract_line.py
--rw-r--r--  2.0 unx     2778 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/models/product_template.py
--rw-r--r--  2.0 unx      361 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/models/res_company.py
--rw-r--r--  2.0 unx      375 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/models/res_config_settings.py
--rw-r--r--  2.0 unx     6065 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/models/sale_order.py
--rw-r--r--  2.0 unx    11087 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/models/sale_order_line.py
--rw-r--r--  2.0 unx      165 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      310 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      212 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/static/description/icon.png
--rw-r--r--  2.0 unx    13034 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/static/description/index.html
--rw-r--r--  2.0 unx      188 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/tests/__init__.py
--rw-r--r--  2.0 unx     1476 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/tests/test_product.py
--rw-r--r--  2.0 unx    15500 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/tests/test_sale_order.py
--rw-r--r--  2.0 unx     1155 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/views/contract.xml
--rw-r--r--  2.0 unx     3649 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/views/product_template.xml
--rw-r--r--  2.0 unx     1258 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/views/res_config_settings.xml
--rw-r--r--  2.0 unx     5500 b- defN 23-Jun-28 03:06 odoo/addons/product_contract/views/sale_order.xml
--rw-r--r--  2.0 unx     4103 b- defN 23-Jun-28 03:07 odoo14_addon_product_contract-14.0.1.0.2.dev4.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jun-28 03:07 odoo14_addon_product_contract-14.0.1.0.2.dev4.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Jun-28 03:07 odoo14_addon_product_contract-14.0.1.0.2.dev4.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     4467 b- defN 23-Jun-28 03:07 odoo14_addon_product_contract-14.0.1.0.2.dev4.dist-info/RECORD
-43 files, 296803 bytes uncompressed, 64166 bytes compressed:  78.4%
+Zip file size: 71804 bytes, number of entries: 43
+-rw-r--r--  2.0 unx     3480 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/README.rst
+-rw-r--r--  2.0 unx      121 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/__init__.py
+-rw-r--r--  2.0 unx      750 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/__manifest__.py
+-rw-r--r--  2.0 unx    13107 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/de.po
+-rw-r--r--  2.0 unx    13429 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/es.po
+-rw-r--r--  2.0 unx    12193 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/fi.po
+-rw-r--r--  2.0 unx    13411 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/fr.po
+-rw-r--r--  2.0 unx    12672 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/hi_IN.po
+-rw-r--r--  2.0 unx    13060 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/hr.po
+-rw-r--r--  2.0 unx    12455 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/hr_HR.po
+-rw-r--r--  2.0 unx    13420 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/it.po
+-rw-r--r--  2.0 unx    12349 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/nl.po
+-rw-r--r--  2.0 unx    12339 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/nl_NL.po
+-rw-r--r--  2.0 unx    15660 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/product_contract.pot
+-rw-r--r--  2.0 unx    13386 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/pt.po
+-rw-r--r--  2.0 unx    13427 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/pt_BR.po
+-rw-r--r--  2.0 unx    12378 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/ru.po
+-rw-r--r--  2.0 unx    12359 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/tr.po
+-rw-r--r--  2.0 unx    12126 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/i18n/tr_TR.po
+-rw-r--r--  2.0 unx      327 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/models/__init__.py
+-rw-r--r--  2.0 unx     1289 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/models/contract.py
+-rw-r--r--  2.0 unx     2022 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/models/contract_line.py
+-rw-r--r--  2.0 unx     2778 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/models/product_template.py
+-rw-r--r--  2.0 unx      361 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/models/res_company.py
+-rw-r--r--  2.0 unx      375 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/models/res_config_settings.py
+-rw-r--r--  2.0 unx     6387 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/models/sale_order.py
+-rw-r--r--  2.0 unx    11744 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/models/sale_order_line.py
+-rw-r--r--  2.0 unx      165 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      310 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      212 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/readme/USAGE.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/static/description/icon.png
+-rw-r--r--  2.0 unx    13034 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/static/description/index.html
+-rw-r--r--  2.0 unx      188 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/tests/__init__.py
+-rw-r--r--  2.0 unx     1476 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/tests/test_product.py
+-rw-r--r--  2.0 unx    15801 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/tests/test_sale_order.py
+-rw-r--r--  2.0 unx     1155 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/views/contract.xml
+-rw-r--r--  2.0 unx     3649 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/views/product_template.xml
+-rw-r--r--  2.0 unx     1258 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/views/res_config_settings.xml
+-rw-r--r--  2.0 unx     5559 b- defN 23-Jul-11 12:14 odoo/addons/product_contract/views/sale_order.xml
+-rw-r--r--  2.0 unx     4098 b- defN 23-Jul-11 12:14 odoo14_addon_product_contract-14.0.1.1.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-11 12:14 odoo14_addon_product_contract-14.0.1.1.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jul-11 12:14 odoo14_addon_product_contract-14.0.1.1.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     4447 b- defN 23-Jul-11 12:14 odoo14_addon_product_contract-14.0.1.1.0.dist-info/RECORD
+43 files, 298309 bytes uncompressed, 64424 bytes compressed:  78.4%
```

## zipnote {}

```diff
@@ -111,20 +111,20 @@
 
 Filename: odoo/addons/product_contract/views/res_config_settings.xml
 Comment: 
 
 Filename: odoo/addons/product_contract/views/sale_order.xml
 Comment: 
 
-Filename: odoo14_addon_product_contract-14.0.1.0.2.dev4.dist-info/METADATA
+Filename: odoo14_addon_product_contract-14.0.1.1.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_product_contract-14.0.1.0.2.dev4.dist-info/WHEEL
+Filename: odoo14_addon_product_contract-14.0.1.1.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_product_contract-14.0.1.0.2.dev4.dist-info/top_level.txt
+Filename: odoo14_addon_product_contract-14.0.1.1.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_product_contract-14.0.1.0.2.dev4.dist-info/RECORD
+Filename: odoo14_addon_product_contract-14.0.1.1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/product_contract/__manifest__.py

```diff
@@ -1,14 +1,14 @@
 # Copyright 2017 LasLabs Inc.
 # Copyright 2018 ACSONE SA/NV.
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html).
 
 {
     "name": "Recurring - Product Contract",
-    "version": "14.0.1.0.1",
+    "version": "14.0.1.1.0",
     "category": "Contract Management",
     "license": "AGPL-3",
     "author": "LasLabs, " "ACSONE SA/NV, " "Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/contract",
     "depends": ["product", "contract", "sale"],
     "data": [
         "views/res_config_settings.xml",
```

## odoo/addons/product_contract/i18n/product_contract.pot

```diff
@@ -322,14 +322,20 @@
 #: model:ir.model.fields.selection,name:product_contract.selection__product_template__recurring_rule_type__yearly
 #: model:ir.model.fields.selection,name:product_contract.selection__sale_order_line__auto_renew_rule_type__yearly
 #: model:ir.model.fields.selection,name:product_contract.selection__sale_order_line__recurring_rule_type__yearly
 msgid "Year(s)"
 msgstr ""
 
 #. module: product_contract
+#: code:addons/product_contract/models/sale_order_line.py:0
+#, python-format
+msgid "You can check the field \"Is a contract\" only for Contract product"
+msgstr ""
+
+#. module: product_contract
 #: code:addons/product_contract/models/sale_order.py:0
 #: code:addons/product_contract/models/sale_order_line.py:0
 #, python-format
 msgid "You can't upsell or downsell a terminated contract"
 msgstr ""
 
 #. module: product_contract
```

## odoo/addons/product_contract/models/sale_order.py

```diff
@@ -21,28 +21,45 @@
                 "done",
                 "cancel",
             ) and rec.order_line.filtered("contract_id.is_terminated"):
                 raise ValidationError(
                     _("You can't upsell or downsell a terminated contract")
                 )
 
+    def _get_line_to_create_contract(self):
+        """
+        Override this method to define more filter criteria of line for which we create contract
+        :return: line to create contract
+        """
+        self.ensure_one()
+        line_to_create_contract = self.order_line.filtered(
+            lambda r: not r.contract_id and r.is_contract
+        )
+        return line_to_create_contract
+
+    def _get_line_to_update_contract(self):
+        """
+        Override this method to define more filter criteria of line for which we update contract
+        :return: line to update contract
+        """
+        self.ensure_one()
+        line_to_update_contract = self.order_line.filtered(
+            lambda r: r.contract_id
+            and r.is_contract
+            and r not in r.contract_id.contract_line_ids.mapped("sale_order_line_id")
+        )
+        return line_to_update_contract
+
     @api.depends("order_line.contract_id", "state")
     def _compute_need_contract_creation(self):
         self.update({"need_contract_creation": False})
         for rec in self:
             if rec.state in ("sale", "done"):
-                line_to_create_contract = rec.order_line.filtered(
-                    lambda r: not r.contract_id and r.product_id.is_contract
-                )
-                line_to_update_contract = rec.order_line.filtered(
-                    lambda r: r.contract_id
-                    and r.product_id.is_contract
-                    and r
-                    not in r.contract_id.contract_line_ids.mapped("sale_order_line_id")
-                )
+                line_to_create_contract = rec._get_line_to_create_contract()
+                line_to_update_contract = rec._get_line_to_update_contract()
                 if line_to_create_contract or line_to_update_contract:
                     rec.need_contract_creation = True
 
     @api.depends("order_line")
     def _compute_is_contract(self):
         self.is_contract = any(self.order_line.mapped("is_contract"))
 
@@ -62,23 +79,16 @@
             "line_recurrence": self.partner_invoice_id.id,
         }
 
     def action_create_contract(self):
         contract_model = self.env["contract.contract"]
         contracts = []
         for rec in self.filtered("is_contract"):
-            line_to_create_contract = rec.order_line.filtered(
-                lambda r: not r.contract_id and r.product_id.is_contract
-            )
-            line_to_update_contract = rec.order_line.filtered(
-                lambda r: r.contract_id
-                and r.product_id.is_contract
-                and r
-                not in r.contract_id.contract_line_ids.mapped("sale_order_line_id")
-            )
+            line_to_create_contract = rec._get_line_to_create_contract()
+            line_to_update_contract = rec._get_line_to_update_contract()
             contract_templates = self.env["contract.template"]
             for order_line in line_to_create_contract:
                 contract_template = order_line.product_id.with_company(
                     rec.company_id
                 ).property_contract_template_id
                 if not contract_template:
                     raise ValidationError(
```

## odoo/addons/product_contract/models/sale_order_line.py

```diff
@@ -8,15 +8,15 @@
 from odoo.exceptions import ValidationError
 
 
 class SaleOrderLine(models.Model):
     _inherit = "sale.order.line"
 
     is_contract = fields.Boolean(
-        string="Is a contract", related="product_id.is_contract"
+        string="Is a contract",
     )
     contract_id = fields.Many2one(
         comodel_name="contract.contract", string="Contract", copy=False
     )
     contract_template_id = fields.Many2one(
         comodel_name="contract.template",
         string="Contract Template",
@@ -116,34 +116,44 @@
                 self._get_auto_renew_rule_type(),
                 int(self.product_uom_qty),
             )
             - relativedelta(days=1)
         )
         return date_end
 
-    @api.depends("product_id")
+    @api.depends("product_id", "is_contract")
     def _compute_auto_renew(self):
         for rec in self:
-            if rec.product_id.is_contract:
+            if rec.is_contract:
                 rec.product_uom_qty = rec.product_id.default_qty
                 rec.recurring_rule_type = rec.product_id.recurring_rule_type
                 rec.recurring_invoicing_type = rec.product_id.recurring_invoicing_type
                 rec.date_start = rec.date_start or fields.Date.today()
 
                 rec.date_end = rec._get_date_end()
                 rec.is_auto_renew = rec.product_id.is_auto_renew
                 if rec.is_auto_renew:
                     rec.auto_renew_interval = rec.product_id.auto_renew_interval
                     rec.auto_renew_rule_type = rec.product_id.auto_renew_rule_type
 
-    @api.onchange("date_start", "product_uom_qty", "recurring_rule_type")
+    @api.onchange("date_start", "product_uom_qty", "recurring_rule_type", "is_contract")
     def onchange_date_start(self):
-        for rec in self.filtered("product_id.is_contract"):
+        for rec in self.filtered("is_contract"):
             rec.date_end = rec._get_date_end() if rec.date_start else False
 
+    @api.onchange("product_id")
+    def product_id_change(self):
+        super().product_id_change()
+        for rec in self:
+            if rec.product_id.is_contract:
+                rec.is_contract = True
+            else:
+                # Don't initialize wrong values
+                rec.is_contract = False
+
     def _get_contract_line_qty(self):
         """Returns the quantity to be put on new contract lines."""
         self.ensure_one()
         # The quantity on the generated contract line is 1, as it
         # correspond to the most common use cases:
         # - quantity on the SO line = number of periods sold and unit
         #   price the price of one period, so the
@@ -255,14 +265,24 @@
                     rec.contract_id.contract_template_id
                     and rec.contract_template_id != rec.contract_id.contract_template_id
                 ):
                     raise ValidationError(
                         _("Contract product has different contract template")
                     )
 
+    @api.constrains("product_id", "contract_id")
+    def _check_contract_sale_line_is_contract(self):
+        for rec in self:
+            if rec.is_contract and not rec.product_id.is_contract:
+                raise ValidationError(
+                    _(
+                        'You can check the field "Is a contract" only for Contract product'
+                    )
+                )
+
     def _compute_invoice_status(self):
         res = super()._compute_invoice_status()
         self.filtered("contract_id").update({"invoice_status": "no"})
         return res
 
     def invoice_line_create(self, invoice_id, qty):
         return super(
@@ -270,16 +290,16 @@
         ).invoice_line_create(invoice_id, qty)
 
     @api.depends(
         "qty_invoiced",
         "qty_delivered",
         "product_uom_qty",
         "order_id.state",
-        "product_id.is_contract",
+        "is_contract",
     )
     def _get_to_invoice_qty(self):
         """
         sale line linked to contracts must not be invoiced from sale order
         """
         res = super()._get_to_invoice_qty()
-        self.filtered("product_id.is_contract").update({"qty_to_invoice": 0.0})
+        self.filtered("is_contract").update({"qty_to_invoice": 0.0})
         return res
```

## odoo/addons/product_contract/tests/test_sale_order.py

```diff
@@ -61,16 +61,23 @@
                 "is_contract": True,
                 "property_contract_template_id": cls.contract_template2.id,
             }
         )
         cls.order_line1 = cls.sale.order_line.filtered(
             lambda l: l.product_id == cls.product1
         )
+
         cls.order_line1.date_start = "2018-01-01"
         cls.order_line1.product_uom_qty = 12
+        cls.order_line1.product_id_change()
+        cls.order_line2 = cls.sale.order_line.filtered(
+            lambda l: l.product_id == cls.product2
+        )
+        cls.order_line2.product_id_change()
+
         pricelist = cls.sale.partner_id.property_product_pricelist.id
         cls.contract = cls.env["contract.contract"].create(
             {
                 "name": "Test Contract 2",
                 "partner_id": cls.sale.partner_id.id,
                 "pricelist_id": pricelist,
                 "contract_type": "sale",
@@ -190,15 +197,15 @@
     def test_check_contract_sale_partner(self):
         """Can't link order line to a partner contract different then the
         order one"""
         contract2 = self.env["contract.contract"].create(
             {
                 "name": "Contract",
                 "contract_template_id": self.contract_template2.id,
-                "partner_id": self.sale.partner_id.id,
+                "partner_id": self.env.user.partner_id.id,
                 "line_recurrence": True,
             }
         )
         with self.assertRaises(ValidationError):
             self.order_line1.contract_id = contract2
 
     def test_check_contract_sale_contract_template(self):
@@ -214,14 +221,15 @@
         )
         with self.assertRaises(ValidationError):
             self.order_line1.contract_id = contract1
 
     def test_no_contract_proudct(self):
         """it should create contract for only product contract"""
         self.product1.is_contract = False
+        self.order_line1.product_id_change()
         self.sale.action_confirm()
         self.assertFalse(self.order_line1.contract_id)
 
     def test_sale_order_line_invoice_status(self):
         """Sale order line for contract product should have nothing to
         invoice as status"""
         self.order_line1._compute_auto_renew()
@@ -237,14 +245,15 @@
         self.order_line1._compute_auto_renew()
         self.sale.action_confirm()
         self.assertEqual(self.sale.invoice_status, "no")
 
     def test_sale_order_create_invoice(self):
         """Should not invoice contract product on sale order create invoice"""
         self.product2.is_contract = False
+        self.order_line2.product_id_change()
         self.product2.invoice_policy = "order"
         self.order_line1._compute_auto_renew()
         self.sale.action_confirm()
         self.sale._create_invoices()
         self.assertEqual(len(self.sale.invoice_ids), 1)
         invoice_line = self.sale.invoice_ids.invoice_line_ids.filtered(
             lambda line: line.product_id.is_contract
```

## odoo/addons/product_contract/views/sale_order.xml

### odoo/addons/product_contract/views/sale_order.xml

```diff
@@ -19,14 +19,15 @@
         </button>
       </xpath>
       <xpath expr="//field[@name='order_line']" position="before">
         <field name="is_contract" attrs="{'invisible': []}"/>
       </xpath>
       <xpath expr="//field[@name='order_line']/form//field[@name='product_id']" position="after">
         <field name="contract_template_id" attrs="{'invisible': []}"/>
+        <field name="is_contract" invisible="1"/>
         <field name="contract_id" options="{&quot;no_create&quot;: True}" attrs="{'invisible': [('is_contract', '=', False)]}" domain="['|',('contract_template_id','=',contract_template_id),                        ('contract_template_id','=',False),                        ('partner_id','=',parent.partner_id),                        ('is_terminated','=',False),                        ]"/>
         <field name="contract_line_id" attrs="{'invisible': [('is_contract', '=', False)]}" domain="[('contract_id','=',contract_id)]"/>
       </xpath>
       <xpath expr="//field[@name='order_line']/form//field[@name='tax_id']/parent::group" position="after">
         <field name="is_contract" attrs="{'invisible': []}"/>
         <separator colspan="4" string="Recurrence Invoicing" attrs="{'invisible': [('is_contract', '=', False)]}"/>
         <group attrs="{'invisible': [('is_contract', '=', False)]}">
```

## Comparing `odoo14_addon_product_contract-14.0.1.0.2.dev4.dist-info/METADATA` & `odoo14_addon_product_contract-14.0.1.1.0.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-product-contract
-Version: 14.0.1.0.2.dev4
+Version: 14.0.1.1.0
 Summary: Recurring - Product Contract
 Home-page: https://github.com/OCA/contract
 Author: LasLabs, ACSONE SA/NV, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo14_addon_product_contract-14.0.1.0.2.dev4.dist-info/RECORD` & `odoo14_addon_product_contract-14.0.1.1.0.dist-info/RECORD`

 * *Files 8% similar despite different names*

```diff
@@ -1,43 +1,43 @@
 odoo/addons/product_contract/README.rst,sha256=QxsazlKukBn1vFSSxqGiVhNjobnUS6ujIKUjmyrtZs8,3480
 odoo/addons/product_contract/__init__.py,sha256=xthkHaBt3FtjkhHnqZYNIFjehISg2jaxWohDYPFHDLQ,121
-odoo/addons/product_contract/__manifest__.py,sha256=S4A7ZrywmtoyEnyVjrnNgzXn0f67SzMWQMVKl0Qtlcc,750
+odoo/addons/product_contract/__manifest__.py,sha256=YdM5vvOy0rUTattxKov-Vb54EM2DRI5ZxkV93dmNVDU,750
 odoo/addons/product_contract/i18n/de.po,sha256=oSs7O9aFr87Ji854AywMO_zrCPSDRHZkuVZuW7Ooz84,13107
 odoo/addons/product_contract/i18n/es.po,sha256=JVgp_J_6hzTb3G4Wi7KQPymvwOZ6gGNpIKA5_jz39ts,13429
 odoo/addons/product_contract/i18n/fi.po,sha256=ouMlT1bso8yKOidbL5lBaiHUMzTEnGc5KpQb_I2pJ7c,12193
 odoo/addons/product_contract/i18n/fr.po,sha256=eVPtFZENFNa7uAEfbSPvNev_GjY--QPleZUa38JMZBc,13411
 odoo/addons/product_contract/i18n/hi_IN.po,sha256=hyij-daWAS8KE-rRsvE5hrnpKep2J9lWbt4zwoMGTgs,12672
 odoo/addons/product_contract/i18n/hr.po,sha256=uD2uIX3T_87gpjIeY0YFHsQDtVmX8-VwYPeqCZ0RFl0,13060
 odoo/addons/product_contract/i18n/hr_HR.po,sha256=n6PQ_q3K4eQCiaXug5hZNj3wrZEFyld4G4X1zfI2_b0,12455
 odoo/addons/product_contract/i18n/it.po,sha256=pql2YgCpnUx2NgfmtkgO-dU4UaMAwiZZFMQi-ubS9Qc,13420
 odoo/addons/product_contract/i18n/nl.po,sha256=o-bTY5hnACwyCNsLlUuj5SPuGNvW4NvVAVXpxfrpCt4,12349
 odoo/addons/product_contract/i18n/nl_NL.po,sha256=yFmU6b6r33wVSJ-0K2Tc5Xcbo81cXDa5iITYHzDEUQU,12339
-odoo/addons/product_contract/i18n/product_contract.pot,sha256=Ei3_oTYRORXZK32XN2b970fLlPt40sVavZdH1d49KPY,15468
+odoo/addons/product_contract/i18n/product_contract.pot,sha256=mLBaR_QLCyBkj1Ev4K7jn0IiyJoXLzFns1Kv2LrcBCc,15660
 odoo/addons/product_contract/i18n/pt.po,sha256=G7_hm7ACLfsOFBT9Cu-vMjHZg51Rf_mn0U8Qkw4vMkU,13386
 odoo/addons/product_contract/i18n/pt_BR.po,sha256=w5mgPmAn2nAnFKK3JgDU5SLgyqvwFsvZDsLx9Ywkf1E,13427
 odoo/addons/product_contract/i18n/ru.po,sha256=E0SFqFg9ZLIq7nF9H5CCKk1X7JdWI8aSV4tMtx6Jaf0,12378
 odoo/addons/product_contract/i18n/tr.po,sha256=sc_v3DNx-OBRodN2P0-B0IU0c_yPv7p15LZwDns9P_g,12359
 odoo/addons/product_contract/i18n/tr_TR.po,sha256=vLCHJ_TOe1cR9ple0FjjbI_lD9AqeZV21sXJub7KqIw,12126
 odoo/addons/product_contract/models/__init__.py,sha256=5zc4GDeT7QRFGWqow_pThZeDVW4ylQVTWlnXs6CGs_4,327
 odoo/addons/product_contract/models/contract.py,sha256=KaDxde8YgXPAwMV2jYPKrlPsqDpB3Rf83EzhztCON2A,1289
 odoo/addons/product_contract/models/contract_line.py,sha256=peLazfeZwalatf9BP2zjf6NKKtzKyuC3aBE9PkwYYNw,2022
 odoo/addons/product_contract/models/product_template.py,sha256=zBPMDj5AQkaasQokl6SiFrrAB7fj4QHdZgkksvEWAMo,2778
 odoo/addons/product_contract/models/res_company.py,sha256=QajI1D2YP3ZAW7zvVmSG19aIhIrElYEcg-8K8HN2K3w,361
 odoo/addons/product_contract/models/res_config_settings.py,sha256=-9Oxfy1UDgbxRN2ZVj4KiqjH0fEyvtq-QfTWR8F5DLE,375
-odoo/addons/product_contract/models/sale_order.py,sha256=W6KBRLi8bUS-KKAGCqrTTIlDnDbxbhv02cO5ZwDYEUs,6065
-odoo/addons/product_contract/models/sale_order_line.py,sha256=JyyfaxVL3muU4b_0kuWu8y8LywQdzGCiV2PsExnSUA8,11087
+odoo/addons/product_contract/models/sale_order.py,sha256=x50Euxvpj5rJoFaxMMkIhfNt7R691AdVZ5AwInOsjNw,6387
+odoo/addons/product_contract/models/sale_order_line.py,sha256=3r5nZ4ZQDJ4S_FoWMWbUN1IyWioZSp0PVwgBvjFF3mY,11744
 odoo/addons/product_contract/readme/CONTRIBUTORS.rst,sha256=xLyhSNug2-OTvxbhCzLJo9gohTagjqY6cjBeaMLg7XQ,165
 odoo/addons/product_contract/readme/DESCRIPTION.rst,sha256=Ej2w15FIHt-n7ApFNeuOM8Pj3dBHlDpJORZKIis8uIs,310
 odoo/addons/product_contract/readme/USAGE.rst,sha256=dvH5XIT2SYzl6MkhvyaeOm_Wu19x6dxIdL-7GuxIvR4,212
 odoo/addons/product_contract/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/product_contract/static/description/index.html,sha256=rHL_HbTMW5oOLnhOdItT74ok1TaKBg42yDOzzQTH8fc,13034
 odoo/addons/product_contract/tests/__init__.py,sha256=5mXU7RIVbYzRjkZzthsP8HAKDd1EH4sQqo_rIoC_xbI,188
 odoo/addons/product_contract/tests/test_product.py,sha256=aMdreO62nfSc9v1WlPJR4oXSCkN8_SIJ9WNveD_ukGM,1476
-odoo/addons/product_contract/tests/test_sale_order.py,sha256=FUiXObOZgowNGfFVY3QdWjyeV6QJdhUbmeSflpgM1bg,15500
+odoo/addons/product_contract/tests/test_sale_order.py,sha256=7tQYqAIVfB1uAj2ERznET-ayh0Jz2J0QI4oV9Q96N48,15801
 odoo/addons/product_contract/views/contract.xml,sha256=sbb6rFcwWdaJ1116K1279kuuLOqv4mITyg-65HrDewM,1155
 odoo/addons/product_contract/views/product_template.xml,sha256=Ak29VhAJHlsTeUEUKCMtCBwURUx0gJ7OMWE-ItJ8uL0,3649
 odoo/addons/product_contract/views/res_config_settings.xml,sha256=lorBJiOnNmr-DOXqT3M0NL-5JxPYa92iggegk-zLkZY,1258
-odoo/addons/product_contract/views/sale_order.xml,sha256=TbRNFmW6WGob7zP_xBSwaZDdMUeDarng3Q4PFQDIIh4,5500
-odoo14_addon_product_contract-14.0.1.0.2.dev4.dist-info/METADATA,sha256=9AWsBvzT8rYaqbhSe5Ru5SGDTIzdLrttM4FGxQttmAU,4103
-odoo14_addon_product_contract-14.0.1.0.2.dev4.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-odoo14_addon_product_contract-14.0.1.0.2.dev4.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_product_contract-14.0.1.0.2.dev4.dist-info/RECORD,,
+odoo/addons/product_contract/views/sale_order.xml,sha256=h8XpNdTw9Ms1SUXBLi05ukNJfu2MyG0lBgGHfgGp1hc,5559
+odoo14_addon_product_contract-14.0.1.1.0.dist-info/METADATA,sha256=fEpfeUwBERu5BhHCccfE3QJIWgTd0qSl-QCQYiwjttc,4098
+odoo14_addon_product_contract-14.0.1.1.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo14_addon_product_contract-14.0.1.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_product_contract-14.0.1.1.0.dist-info/RECORD,,
```

